# 2.1. Архитектура и структура программного комплекса

Разработанная автоматизированная система распознавания лиц построена на модульной архитектуре, обеспечивающей простоту разработки, сопровождения и дальнейшего развития. Система реализована на языке Python с использованием современных библиотек машинного обучения и графического интерфейса пользователя.

## Общая архитектура системы

Архитектура системы основана на принципе разделения ответственности между компонентами. Каждый модуль выполняет конкретные функции и взаимодействует с другими компонентами через четко определенные интерфейсы. Такой подход обеспечивает гибкость системы и возможность независимой модификации отдельных компонентов.

Система состоит из следующих основных модулей: модуль пользовательского интерфейса, управление камерой, движок распознавания лиц, система управления базой данных, модуль конфигурации и система логирования. Каждый из этих компонентов имеет специфическое назначение и может функционировать относительно независимо от других.

Модуль пользовательского интерфейса реализован с использованием библиотеки PyQt5 и обеспечивает удобное взаимодействие пользователя с системой. Он включает окно входа в систему для администраторов, главное окно с различными вкладками функциональности, диалог добавления новых пользователей и специализированный виджет для распознавания лиц в реальном времени.

Главное окно системы построено по принципу вкладочного интерфейса, где каждая вкладка отвечает за определенную группу функций. Панель управления предоставляет общую статистику работы системы и последние события распознавания. Вкладка управления пользователями позволяет просматривать список зарегистрированных пользователей и выполнять операции добавления или удаления. Раздел распознавания лиц обеспечивает работу с камерой в реальном времени и отображение результатов идентификации.

## Система управления камерой

Управление видеопотоком реализовано через централизованный менеджер камеры, построенный по паттерну Синглтон. Это решение предотвращает конфликты доступа к аппаратным ресурсам камеры между различными компонентами системы и обеспечивает единую точку управления видеооборудованием.

Менеджер камеры обеспечивает автоматическое обнаружение доступных видеоустройств и их инициализацию с оптимальными параметрами. Система поддерживает различные разрешения записи и частоту кадров, автоматически адаптируясь к возможностям конкретного оборудования. При недоступности камеры система корректно обрабатывает ошибки и предоставляет пользователю понятные сообщения о проблемах.

Видеопоток обрабатывается в отдельном потоке для обеспечения отзывчивости пользовательского интерфейса. Кадры с камеры передаются подписанным компонентам через систему обратных вызовов, что позволяет различным модулям одновременно получать доступ к видеоданным без дублирования ресурсов.

Для повышения производительности система использует буферизацию кадров с ограниченным размером буфера, что предотвращает накопление задержек при обработке. При остановке работы с камерой все ресурсы корректно освобождаются, что важно для стабильности длительной работы системы.

## Движок распознавания лиц

Ядром системы является движок распознавания лиц, построенный на основе библиотеки face_recognition, которая в свою очередь использует современные алгоритмы машинного обучения для извлечения уникальных характеристик лица. Движок обеспечивает высокую точность распознавания при приемлемой скорости обработки.

Процесс распознавания включает несколько этапов обработки каждого кадра. Сначала выполняется обнаружение лиц на изображении с определением их координат. Затем для каждого найденного лица извлекается численный вектор характеристик - биометрический шаблон. Полученный шаблон сравнивается с заранее сохраненными шаблонами известных пользователей для определения личности.

Для оптимизации производительности система использует несколько технических решений. Кадры обрабатываются с пониженным разрешением для ускорения алгоритмов обнаружения лиц, а окончательное извлечение характеристик выполняется на изображении полного размера. Система пропускает кадры при высокой частоте съемки, обрабатывая только каждый третий или пятый кадр в зависимости от производительности оборудования.

Важной особенностью реализации является кэширование биометрических шаблонов в памяти для быстрого доступа при сравнении. При запуске системы все шаблоны зарегистрированных пользователей загружаются в оперативную память, что значительно ускоряет процесс идентификации по сравнению с постоянным обращением к базе данных.

Система также реализует механизм предотвращения множественных срабатываний для одного пользователя. После успешного распознавания устанавливается временная задержка, в течение которой повторные распознавания того же лица не регистрируются. Это предотвращает спам в журналах и улучшает пользовательский опыт.

## Управление данными и конфигурацией

База данных системы реализована с использованием SQLite, что обеспечивает простоту развертывания и отсутствие зависимостей от внешних серверов баз данных. Структура базы включает таблицы для хранения информации о пользователях, администраторах системы и журналов операций распознавания.

Система конфигурации построена на JSON-файлах, что обеспечивает читаемость настроек и простоту их модификации. Конфигурационные параметры включают настройки камеры, пороги распознавания, пути к файлам и параметры пользовательского интерфейса. Централизованное управление конфигурацией позволяет легко адаптировать систему под различные условия эксплуатации.

Модуль логирования обеспечивает детальную регистрацию всех операций системы для последующего анализа и устранения неполадок. Журналы ведутся как в файлы, так и в консоль, с различными уровнями детализации для разных типов событий. Система автоматически ротирует журналы для предотвращения переполнения дискового пространства.

Такая архитектура обеспечивает надежную основу для дальнейшего развития системы и интеграции дополнительных модулей безопасности, которые могут быть добавлены без существенного изменения базовой функциональности.